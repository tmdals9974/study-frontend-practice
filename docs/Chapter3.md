# 3장 - 웹뷰와의 첫 만남

## 1. 웹뷰 vs 모바일 웹
  - 네이티브 앱은 여러가지 운영상의 이슈로 인해, 페이지 수가 많아질 수록 복잡도가 급격하게 올라간다.
  - 웹뷰는 웹과 달리 성능에 민감해야한다. (웹은 사용자가 기다림에 익숙하지만 앱은 아니다.)
  - 웹뷰는 다양한 로딩 UX 전략이 필요하다.
    - 앱에서 로딩 구현 시: 웹앱과의 정확한 커뮤니케이션이 필요하나 정확하기 힘들며 웹앱 크래시에 대책이 없음.
    - 웹에서 로딩 구현 시: 정확한 처리가 가능하나, 웹앱 작동 전까지 딜레이 구간이 발생함. 웹뷰에서는 스켈레톤 로더 전략이 이상적. **캐싱 로직 구현의 적극적 시도가 필요**

## 2. 웹뷰 체크리스트
  - 플랫폼 최소 지원 버전 확인
  - WebView 구현 컴포넌트 확인 (웹뷰 컴포넌트에 따라 기능/호환성이 다름)
  - 웹뷰 기능 설정 확인 (쿠키, 로컬스티리지, 캐시 활성화 옵션 등.. )

## 3. 웹뷰 웹앱 설계 및 구성
  - 웹뷰로써 CSR이 좋은가, SSR이 좋은가?
    - CSR: 독립된 웹뷰 수 증가 예상, 백엔드가 있는 SSR의 운영 비용 증가, SEO 필요성이 낮음, 기민한 사용자 반응성이 더욱 중요

## 4. 단일 화면 웹뷰 구현
  - 프로젝트 실행 : [`b2c-server`](./projects/b2c-server.md), [`cdn`](./projects/cdn.md), [`remote-config`](./projects/remote-config.md), [`webview1.1`](./projects/web.md#webview11), [`12shopapp`](./projects/12shopapp.md) 실행
  - **storybook 사용 시 장점**
    - 기획자와 디자이너가 페이지나 서비스 완성 전에 컴포넌트를 확인할 수 있다
    - 스토리북을 만드는 과정에서 의존성을 제거하고 재사용성을 높일 수 있다

## 5. 추가된 화면, 라우팅은 어디서?
  - 웹뷰로 사용중인 웹앱 내에서 라우팅을 하게 되면, 링크 공유했을 경우 다이렉트 진입을 못함 (앱에서 컨트롤을 못하기 때문.)
  - 위와 같은 문제를 해결하기 위해 딥링크 사용 필요
  - 스켈레톤 UI 필수 사용.

## 6. 멀티 웹뷰 그리고 딥링크 구현
  - IOS의 Universal Link는 세팅이 어려워서 잘 안쓴다.
  - 딥링크: 특정 화면으로 다이렉트로 진입할 수 있는 방법. 앱개발자들이 딥링크 스펙을 만들지만 프론트엔드 개발자들도 조언해줘야함. (앱개발자는 링크에 대해 잘 알지 못함.)
    - 딥링크 스펙을 만들때, 미래지향적으로 만들어야한다. 다이렉트 진입을 위해 링크를 외부에 유출 시킬텐데, 현재 딥링크 스펙으로는 지원이 안되어서 업그레이드 해야할 경우, 새로운 링크를 생성하게 된다. 그럼 기존 링크는 무효화되기 때문에 미래를 생각해야함.
    - 딥링크 뿐만아니라, 외부에 공유할 링크는 신중해야하고, 근미래에 대한 확장성까지 고려하여 설계해야한다.

## 7. 화면간 데이터 교환을 위한 아키텍처
  - 딥링크를 사용하거나 앱에서 라우팅을 하게되어, 어플리케이션이 분리되어 번들링되게 된다면 웹뷰간 데이터 교환은 어떻게 해야하는가?
    - local Storage는 분리된 어플리케이션끼리 같은 도메인을 써야한다는 제약이 있다.
    - 결국 네이티브쪽에서 데이터를 저장하고, 웹에 제공을 해주어야한다. 이와 같이 데이터 전달을 위한 인터페이스가 구성되어있어야 한다.